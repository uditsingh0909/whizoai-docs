---
title: "Map API"
api: "POST https://api.whizo.ai/v1/map"
description: "Discover and map all URLs within a website systematically for comprehensive site structure analysis"
---

The Map API discovers all accessible URLs within a website, creating a comprehensive sitemap of your target domain. Perfect for SEO audits, content inventory, migration planning, and understanding website architecture.

## Authentication

<ParamField header="Authorization" type="string" required>
  Bearer token using your API key: `Bearer YOUR_API_KEY`
</ParamField>

## Request Body

<ParamField body="url" type="string" required>
  The root URL to begin mapping. Must be a valid HTTP/HTTPS URL.
</ParamField>

<ParamField body="options" type="object">
  Configuration options for mapping behavior
  <Expandable title="options properties">
    <ParamField body="options.maxDepth" type="number" default="2">
      Maximum crawling depth from the starting URL (1-5)

      - Depth 1: Only links directly on the starting page
      - Depth 2: Links found on pages from depth 1
      - Higher depths discover more pages but take longer
    </ParamField>

    <ParamField body="options.maxPages" type="number" default="100">
      Maximum number of pages to discover (1-1000)

      Stops mapping once this limit is reached
    </ParamField>

    <ParamField body="options.sameDomain" type="boolean" default="true">
      Only map pages within the same domain as the starting URL

      When `true`, external links are ignored
    </ParamField>

    <ParamField body="options.includePatterns" type="array">
      URL patterns to include (supports wildcards)

      Example: `["/blog/*", "/products/*"]`
    </ParamField>

    <ParamField body="options.excludePatterns" type="array">
      URL patterns to exclude (supports wildcards)

      Example: `["/admin/*", "*.pdf", "/api/*"]`
    </ParamField>

    <ParamField body="options.respectRobots" type="boolean" default="true">
      Respect robots.txt rules when mapping

      When `true`, pages disallowed in robots.txt are skipped
    </ParamField>

    <ParamField body="options.search" type="string">
      Search query to filter discovered URLs

      Only URLs containing this string will be included in results
    </ParamField>

    <ParamField body="options.timeout" type="number" default="30000">
      Maximum time to wait for each page load in milliseconds (1000-60000)

      Pages that don't load within this time are skipped
    </ParamField>

    <ParamField body="options.engine" type="string" default="auto">
      Scraping engine to use for URL discovery

      - `auto` - Automatically selects best engine (default)
      - `playwright` - Full browser automation with JavaScript
      - `lightweight` - Fast HTTP-based discovery (no JS)
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if mapping was successful
</ResponseField>

<ResponseField name="data" type="object">
  Mapping results and discovered URLs
  <Expandable title="data properties">
    <ResponseField name="domain" type="string">
      The domain that was mapped
    </ResponseField>

    <ResponseField name="rootUrl" type="string">
      The starting URL used for mapping
    </ResponseField>

    <ResponseField name="totalPages" type="number">
      Total number of unique URLs discovered
    </ResponseField>

    <ResponseField name="maxDepthReached" type="number">
      Maximum crawl depth reached during mapping
    </ResponseField>

    <ResponseField name="urls" type="array">
      Array of discovered URLs with metadata
      <Expandable title="url properties">
        <ResponseField name="url" type="string">
          The discovered URL
        </ResponseField>

        <ResponseField name="depth" type="number">
          Crawl depth at which this URL was found (0 = starting page)
        </ResponseField>

        <ResponseField name="statusCode" type="number">
          HTTP status code (200, 301, 404, etc.)
        </ResponseField>

        <ResponseField name="title" type="string" optional>
          Page title if available
        </ResponseField>

        <ResponseField name="discoveredAt" type="string">
          ISO timestamp when URL was discovered
        </ResponseField>

        <ResponseField name="parentUrl" type="string" optional>
          URL of the page where this link was found
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="summary" type="object">
      Mapping statistics and summary
      <Expandable title="summary properties">
        <ResponseField name="totalUrls" type="number">
          Total URLs discovered
        </ResponseField>

        <ResponseField name="successfulUrls" type="number">
          URLs that returned 200 status
        </ResponseField>

        <ResponseField name="failedUrls" type="number">
          URLs that returned error status
        </ResponseField>

        <ResponseField name="redirectUrls" type="number">
          URLs that returned redirect status
        </ResponseField>

        <ResponseField name="mappingTime" type="number">
          Total time taken for mapping in seconds
        </ResponseField>

        <ResponseField name="creditsUsed" type="number">
          Credits consumed for this mapping operation
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

## Examples

### Basic Website Mapping

<CodeGroup>

```bash cURL
curl -X POST "https://api.whizo.ai/v1/map" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "options": {
      "maxDepth": 2,
      "maxPages": 100,
      "sameDomain": true
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.whizo.ai/v1/map', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://example.com',
    options: {
      maxDepth: 2,
      maxPages: 100,
      sameDomain: true
    }
  })
});

const data = await response.json();
console.log(`Discovered ${data.data.totalPages} pages`);
console.log('URLs:', data.data.urls);
```

```python Python
import requests

response = requests.post(
    'https://api.whizo.ai/v1/map',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'url': 'https://example.com',
        'options': {
            'maxDepth': 2,
            'maxPages': 100,
            'sameDomain': True
        }
    }
)

data = response.json()
print(f"Discovered {data['data']['totalPages']} pages")
print(f"URLs: {data['data']['urls']}")
```

</CodeGroup>

<ResponseExample>
```json Response
{
  "success": true,
  "data": {
    "domain": "example.com",
    "rootUrl": "https://example.com",
    "totalPages": 45,
    "maxDepthReached": 2,
    "urls": [
      {
        "url": "https://example.com",
        "depth": 0,
        "statusCode": 200,
        "title": "Example Domain - Home",
        "discoveredAt": "2025-01-15T10:00:00Z",
        "parentUrl": null
      },
      {
        "url": "https://example.com/about",
        "depth": 1,
        "statusCode": 200,
        "title": "About Us",
        "discoveredAt": "2025-01-15T10:00:05Z",
        "parentUrl": "https://example.com"
      },
      {
        "url": "https://example.com/contact",
        "depth": 1,
        "statusCode": 200,
        "title": "Contact Us",
        "discoveredAt": "2025-01-15T10:00:06Z",
        "parentUrl": "https://example.com"
      }
    ],
    "summary": {
      "totalUrls": 45,
      "successfulUrls": 42,
      "failedUrls": 2,
      "redirectUrls": 1,
      "mappingTime": 12.5,
      "creditsUsed": 5
    }
  }
}
```
</ResponseExample>

### Advanced Mapping with Pattern Filtering

<CodeGroup>

```bash cURL
curl -X POST "https://api.whizo.ai/v1/map" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://blog.example.com",
    "options": {
      "maxDepth": 3,
      "maxPages": 200,
      "includePatterns": ["/blog/*", "/articles/*"],
      "excludePatterns": ["/admin/*", "*.pdf", "/api/*"],
      "respectRobots": true,
      "engine": "playwright"
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.whizo.ai/v1/map', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://blog.example.com',
    options: {
      maxDepth: 3,
      maxPages: 200,
      includePatterns: ['/blog/*', '/articles/*'],
      excludePatterns: ['/admin/*', '*.pdf', '/api/*'],
      respectRobots: true,
      engine: 'playwright'
    }
  })
});

const data = await response.json();
console.log('Blog pages discovered:', data.data.urls.length);
```

```python Python
import requests

response = requests.post(
    'https://api.whizo.ai/v1/map',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'url': 'https://blog.example.com',
        'options': {
            'maxDepth': 3,
            'maxPages': 200,
            'includePatterns': ['/blog/*', '/articles/*'],
            'excludePatterns': ['/admin/*', '*.pdf', '/api/*'],
            'respectRobots': True,
            'engine': 'playwright'
        }
    }
)

data = response.json()
print(f"Blog pages discovered: {len(data['data']['urls'])}")
```

</CodeGroup>

<ResponseExample>
```json Response
{
  "success": true,
  "data": {
    "domain": "blog.example.com",
    "rootUrl": "https://blog.example.com",
    "totalPages": 87,
    "maxDepthReached": 3,
    "urls": [
      {
        "url": "https://blog.example.com",
        "depth": 0,
        "statusCode": 200,
        "title": "Blog Home",
        "discoveredAt": "2025-01-15T10:00:00Z"
      },
      {
        "url": "https://blog.example.com/blog/getting-started",
        "depth": 1,
        "statusCode": 200,
        "title": "Getting Started Guide",
        "discoveredAt": "2025-01-15T10:00:02Z",
        "parentUrl": "https://blog.example.com"
      },
      {
        "url": "https://blog.example.com/articles/web-scraping-101",
        "depth": 1,
        "statusCode": 200,
        "title": "Web Scraping 101",
        "discoveredAt": "2025-01-15T10:00:03Z",
        "parentUrl": "https://blog.example.com"
      }
    ],
    "summary": {
      "totalUrls": 87,
      "successfulUrls": 85,
      "failedUrls": 1,
      "redirectUrls": 1,
      "mappingTime": 34.2,
      "creditsUsed": 9
    }
  }
}
```
</ResponseExample>

### Mapping with Search Filter

<CodeGroup>

```bash cURL
curl -X POST "https://api.whizo.ai/v1/map" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "options": {
      "maxDepth": 3,
      "search": "product",
      "maxPages": 50
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.whizo.ai/v1/map', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://example.com',
    options: {
      maxDepth: 3,
      search: 'product',
      maxPages: 50
    }
  })
});

const data = await response.json();
// Only URLs containing "product" will be returned
console.log('Product pages:', data.data.urls);
```

</CodeGroup>

## Mapping Strategies

### Shallow vs Deep Mapping

**Shallow Mapping (depth 1-2)**
- Fast discovery of main pages
- Good for homepage and primary navigation
- Lower credit cost
- Recommended for initial site exploration

```json
{
  "url": "https://example.com",
  "options": {
    "maxDepth": 1,
    "maxPages": 50
  }
}
```

**Deep Mapping (depth 3-5)**
- Comprehensive site discovery
- Finds nested content and deep pages
- Higher credit cost
- Recommended for full site audits

```json
{
  "url": "https://example.com",
  "options": {
    "maxDepth": 4,
    "maxPages": 500
  }
}
```

### Pattern-Based Mapping

Use patterns to focus on specific sections:

```json
{
  "url": "https://ecommerce.com",
  "options": {
    "includePatterns": [
      "/products/*",
      "/categories/*",
      "/collections/*"
    ],
    "excludePatterns": [
      "/cart",
      "/checkout",
      "/account/*"
    ]
  }
}
```

## Credit Costs

Mapping costs vary based on pages discovered:

| Feature | Cost |
|---------|------|
| Basic mapping (per page) | 0.1 credits |
| JavaScript rendering | +0.05 credits per page |
| Deep crawling (depth 4-5) | +0.02 credits per page |

**Examples**:
- Mapping 100 pages at depth 2: 10 credits
- Mapping 500 pages with JavaScript: 75 credits
- Deep mapping (depth 5) of 200 pages: 24 credits

## Error Responses

<ResponseField name="error" type="object">
  <Expandable title="error properties">
    <ResponseField name="code" type="string">
      Error code identifier
    </ResponseField>
    <ResponseField name="message" type="string">
      Human-readable error message
    </ResponseField>
    <ResponseField name="details" type="object" optional>
      Additional error context
    </ResponseField>
  </Expandable>
</ResponseField>

### Common Errors

| Status Code | Error Code | Description |
|-------------|------------|-------------|
| 400 | `invalid_url` | The starting URL is invalid or unreachable |
| 400 | `invalid_options` | Mapping parameters are invalid |
| 401 | `unauthorized` | Invalid or missing API key |
| 402 | `insufficient_credits` | Not enough credits for mapping |
| 429 | `rate_limited` | Rate limit exceeded |
| 500 | `mapping_failed` | Mapping process failed |

<ResponseExample>
```json Error Response
{
  "success": false,
  "error": {
    "code": "invalid_url",
    "message": "The starting URL is not accessible",
    "details": {
      "url": "https://invalid-site.com",
      "statusCode": 404,
      "reason": "Page not found"
    }
  }
}
```
</ResponseExample>

## Rate Limits

Map API rate limits by plan:

- **Free**: 2 mappings per hour, 10 per day
- **Starter**: 10 mappings per hour, 50 per day
- **Pro**: 50 mappings per hour, 200 per day
- **Enterprise**: Custom limits

## Use Cases

<AccordionGroup>
  <Accordion title="SEO Audits">
    Discover all pages for comprehensive SEO analysis:
    - Find all URLs for indexing status check
    - Identify orphaned pages without internal links
    - Detect broken links and 404 errors
    - Map site structure for optimization
  </Accordion>

  <Accordion title="Content Inventory">
    Create complete content inventories:
    - List all blog posts and articles
    - Catalog product pages
    - Document landing pages
    - Track content growth over time
  </Accordion>

  <Accordion title="Migration Planning">
    Plan website migrations and redirects:
    - Map existing URL structure
    - Create redirect mapping
    - Identify pages to migrate
    - Plan new site architecture
  </Accordion>

  <Accordion title="Competitive Analysis">
    Understand competitor site structures:
    - Discover competitor pages
    - Analyze site organization
    - Identify content strategies
    - Find competitive opportunities
  </Accordion>

  <Accordion title="Security Audits">
    Identify all accessible pages:
    - Find all public endpoints
    - Discover admin pages
    - Locate sensitive URLs
    - Map attack surface
  </Accordion>
</AccordionGroup>

## Best Practices

1. **Start shallow, go deeper if needed** - Begin with depth 1-2 for quick overview
2. **Use pattern filtering** - Focus on relevant sections with includePatterns
3. **Respect robots.txt** - Keep respectRobots true for ethical scraping
4. **Set reasonable limits** - Use maxPages to control costs and runtime
5. **Choose appropriate engine** - Use lightweight for fast discovery, playwright for JavaScript-heavy sites
6. **Monitor progress** - Check summary statistics in response for insights
7. **Use search filters** - Narrow results with search parameter when looking for specific content
8. **Handle external links** - Set sameDomain based on your needs

## Performance Tips

### Optimal Settings by Site Size

| Site Size | maxDepth | maxPages | Engine | Est. Time |
|-----------|----------|----------|--------|-----------|
| Small (< 50 pages) | 3 | 50 | lightweight | 10-20 sec |
| Medium (50-200 pages) | 2-3 | 200 | lightweight | 30-60 sec |
| Large (200-1000 pages) | 2 | 500 | lightweight | 2-5 min |
| Enterprise (1000+ pages) | 2 | 1000 | playwright | 5-15 min |

### Speeding Up Mapping

- Use `engine: 'lightweight'` for fastest discovery
- Reduce `maxDepth` to discover fewer levels
- Use `includePatterns` to focus on specific sections
- Set lower `timeout` for faster failure handling
- Avoid JavaScript rendering when not needed

## Related Endpoints

- [Scrape API](/api-reference/scrape) - Scrape individual pages
- [Crawl API](/api-reference/crawl) - Crawl and extract content from multiple pages
- [Search API](/api-reference/search) - Search and scrape results
- [Jobs API](/api-reference/jobs) - Monitor mapping job progress
