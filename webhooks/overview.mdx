---
title: "Webhooks Overview"
description: "Get real-time notifications when events occur in your WhizoAI account"
icon: "webhook"
---

## What are Webhooks?

Webhooks allow you to receive HTTP POST notifications to your server whenever specific events occur in your WhizoAI account. Instead of polling our API for updates, webhooks push event data to you in real-time.

## Use Cases

<CardGroup cols={2}>
<Card title="Job Completion Notifications" icon="check-circle">
Get notified when scraping or crawling jobs finish
</Card>

<Card title="Error Monitoring" icon="triangle-exclamation">
Receive alerts when jobs fail or encounter errors
</Card>

<Card title="Credit Alerts" icon="coins">
Get warned when credits are running low
</Card>

<Card title="Change Detection" icon="eye">
Monitor websites and get notified of content changes
</Card>
</CardGroup>

## Quick Start

### 1. Create a Webhook Endpoint

First, create an endpoint on your server to receive webhook events:

```python Python
from flask import Flask, request, jsonify
import hmac
import hashlib

app = Flask(__name__)
WEBHOOK_SECRET = "your_webhook_secret"

@app.route('/webhook', methods=['POST'])
def webhook():
    # Verify signature (important for security!)
    signature = request.headers.get('X-WhizoAI-Signature')
    payload = request.get_data()

    if not verify_signature(payload, signature, WEBHOOK_SECRET):
        return jsonify({"error": "Invalid signature"}), 401

    # Process the event
    event = request.json
    event_type = event['event']

    if event_type == 'job.completed':
        job_id = event['data']['jobId']
        print(f"Job {job_id} completed successfully!")

    elif event_type == 'job.failed':
        job_id = event['data']['jobId']
        error = event['data']['error']
        print(f"Job {job_id} failed: {error}")

    return jsonify({"received": True}), 200

def verify_signature(payload, signature, secret):
    expected = hmac.new(
        secret.encode(),
        payload,
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(signature, expected)

if __name__ == '__main__':
    app.run(port=3000)
```

```javascript Node.js
const express = require('express');
const crypto = require('crypto');

const app = express();
const WEBHOOK_SECRET = 'your_webhook_secret';

app.post('/webhook', express.raw({type: 'application/json'}), (req, res) => {
  // Verify signature
  const signature = req.headers['x-whizoai-signature'];
  const payload = req.body;

  if (!verifySignature(payload, signature, WEBHOOK_SECRET)) {
    return res.status(401).json({ error: 'Invalid signature' });
  }

  // Parse event
  const event = JSON.parse(payload.toString());
  const eventType = event.event;

  if (eventType === 'job.completed') {
    const jobId = event.data.jobId;
    console.log(`Job ${jobId} completed successfully!`);
  } else if (eventType === 'job.failed') {
    const jobId = event.data.jobId;
    const error = event.data.error;
    console.log(`Job ${jobId} failed: ${error}`);
  }

  res.json({ received: true });
});

function verifySignature(payload, signature, secret) {
  const expected = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');

  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expected)
  );
}

app.listen(3000, () => {
  console.log('Webhook server running on port 3000');
});
```

### 2. Register Your Webhook

Register your webhook endpoint with WhizoAI:

```bash cURL
curl -X POST https://api.whizo.ai/v1/webhooks \
  -H "Authorization: Bearer whizo_YOUR-API-KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-server.com/webhook",
    "events": ["job.completed", "job.failed", "job.started"],
    "secret": "your_webhook_secret"
  }'
```

```python Python
from whizoai import WhizoAI

client = WhizoAI(api_key="whizo_YOUR-API-KEY")

webhook = client.webhooks.create(
    url="https://your-server.com/webhook",
    events=["job.completed", "job.failed", "job.started"],
    secret="your_webhook_secret"
)

print(f"Webhook created: {webhook.id}")
```

### 3. Test Your Webhook

Send a test event to verify your endpoint:

```python
client.webhooks.test(webhook.id)
```

## Managing Webhooks

### List Webhooks

```python
webhooks = client.webhooks.list()

for webhook in webhooks:
    print(f"ID: {webhook.id}")
    print(f"URL: {webhook.url}")
    print(f"Events: {webhook.events}")
    print(f"Active: {webhook.active}")
```

### Update Webhook

```python
client.webhooks.update(
    webhook_id="wh_123abc",
    events=["job.completed", "job.failed", "credit.low"],
    active=True
)
```

### Delete Webhook

```python
client.webhooks.delete("wh_123abc")
```

## Event Payload Structure

All webhook events follow this structure:

```json
{
  "id": "evt_abc123",
  "event": "job.completed",
  "timestamp": "2025-01-15T10:30:00Z",
  "apiVersion": "v1",
  "data": {
    // Event-specific data
  }
}
```

## Common Events

| Event | Description | When Triggered |
|-------|-------------|----------------|
| `job.started` | Job processing started | When scraping/crawling begins |
| `job.progress` | Job progress update | Every 10% progress |
| `job.completed` | Job finished successfully | When job completes |
| `job.failed` | Job failed | When job encounters error |
| `credit.low` | Credits running low | When <10% credits remaining |
| `credit.depleted` | Credits exhausted | When credits reach 0 |

<Note>
See [Webhook Events](/webhooks/events) for complete event reference with payload examples.
</Note>

## Best Practices

<AccordionGroup>
<Accordion title="Always Verify Signatures">
**Critical for security** - Always verify the `X-WhizoAI-Signature` header to ensure requests are from WhizoAI.

```python
def verify_signature(payload, signature, secret):
    expected = hmac.new(
        secret.encode(),
        payload,
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(signature, expected)
```
</Accordion>

<Accordion title="Respond Quickly">
Your webhook endpoint should respond within **5 seconds**. For long-running tasks, return 200 immediately and process asynchronously:

```python
@app.route('/webhook', methods=['POST'])
def webhook():
    # Verify signature first
    if not verify_signature(...):
        return jsonify({"error": "Invalid"}), 401

    # Queue for async processing
    event = request.json
    task_queue.enqueue(process_webhook, event)

    # Respond immediately
    return jsonify({"received": True}), 200
```
</Accordion>

<Accordion title="Handle Retries Gracefully">
WhizoAI retries failed webhooks with exponential backoff. Make your endpoints **idempotent** using the event ID:

```python
processed_events = set()

@app.route('/webhook', methods=['POST'])
def webhook():
    event = request.json
    event_id = event['id']

    if event_id in processed_events:
        return jsonify({"received": True}), 200  # Already processed

    # Process event
    handle_event(event)
    processed_events.add(event_id)

    return jsonify({"received": True}), 200
```
</Accordion>

<Accordion title="Use HTTPS">
Always use HTTPS for webhook URLs. WhizoAI requires HTTPS in production.
</Accordion>
</AccordionGroup>

## Retry Behavior

If your webhook endpoint fails (non-2xx response or timeout), WhizoAI will retry with exponential backoff:

| Attempt | Delay | Total Time |
|---------|-------|------------|
| 1 | Immediate | 0s |
| 2 | 5 seconds | 5s |
| 3 | 25 seconds | 30s |
| 4 | 2 minutes | 2m 30s |
| 5 | 10 minutes | 12m 30s |
| 6 | 1 hour | 1h 12m 30s |

After 6 failed attempts, the webhook is marked as failed and no further retries occur for that event.

## Webhook Logs

View webhook delivery logs in your dashboard:

```python
logs = client.webhooks.logs(webhook_id="wh_123abc", limit=50)

for log in logs:
    print(f"Event: {log.event}")
    print(f"Status: {log.status}")  # success, failed, pending
    print(f"Response Code: {log.response_code}")
    print(f"Attempts: {log.attempts}")
```

## Testing

See [Testing Webhooks](/webhooks/testing) for detailed testing guide including:
- Local development with ngrok
- Mock webhook servers
- Testing frameworks integration

## Security

See [Webhook Security](/webhooks/security) for comprehensive security best practices including:
- Signature verification
- IP allowlisting
- Rate limiting
- Replay attack prevention

## Troubleshooting

<AccordionGroup>
<Accordion title="Not Receiving Webhooks">
**Check:**
1. Webhook URL is correct and accessible
2. Your server is using HTTPS (required in production)
3. Firewall allows incoming requests
4. Webhook is active: `client.webhooks.get(webhook_id).active`
</Accordion>

<Accordion title="Signature Verification Failing">
**Check:**
1. Using raw request body (not parsed JSON)
2. Secret matches what you registered
3. Comparing signatures with timing-safe function
4. Header name is `X-WhizoAI-Signature` (case-sensitive)
</Accordion>

<Accordion title="Timeout Errors">
**Solutions:**
1. Respond with 200 within 5 seconds
2. Process events asynchronously
3. Use job queue for long-running tasks
</Accordion>
</AccordionGroup>

## Rate Limits

Webhook endpoints should handle:
- **Burst rate**: Up to 100 events/second
- **Sustained rate**: Depends on your usage

## Next Steps

<CardGroup cols={2}>
<Card title="Event Reference" icon="list" href="/webhooks/events">
  Complete list of all webhook events and payloads
</Card>

<Card title="Security Guide" icon="shield" href="/webhooks/security">
  Secure your webhook endpoints
</Card>

<Card title="Testing Guide" icon="flask" href="/webhooks/testing">
  Test webhooks in development
</Card>

<Card title="API Reference" icon="code" href="/api-reference/webhooks">
  Full webhooks API documentation
</Card>
</CardGroup>
